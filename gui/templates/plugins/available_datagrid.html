{% extends "freeadmin/generic_model_datagrid.html" %}
{% block actions_static_pane %}
{% comment %}
<div data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region: 'top'" style="background-color: #eee; border-bottom: 1px solid #ccc; height: 21px;">
<div style="padding: 4px;">{% trans "Available" %}</div>
</div>
{% endcomment %}
{{ block.super }}
{% endblock %}
{% block actions_static_buttons %}
<button id="availPluginsBrowse" data-dojo-type="dijit.form.Button">
  <img src="{{ STATIC_URL }}images/ui/buttons/refresh.png" width="16" height="16" />
  <p>{% trans "Refresh" %}</p>
  <script type="dojo/method" data-dojo-event="onClick" data-dojo-args="evt">
    var me = this;
    require(["dojo/query", "dojo/request/xhr"], function(query, xhr) {
      xhr.get('/plugins/plugin/refresh/', { sync: true }).then(function() {
          var grid = query(".gridDiv", me.domNode.parentNode.parentNode)[0].grid;
          grid.set("store", grid.store);
      });
    });

  </script>
</button>

<button id="btn_ServicesPlugins_install" data-dojo-type="dijit.form.Button">
  <img src="{{ STATIC_URL }}images/ui/buttons/plugin_install.png" />
  <p>{% trans "Upload" %}</p>
  <script type="dojo/method" data-dojo-event="onClick" data-dojo-args="evt">
    addObject('{% trans "Upload Plugin"|escapejs %}', '{% url "plugins_upload_nojail" %}', [this,]);
  </script>
</button>
{% endblock %}
